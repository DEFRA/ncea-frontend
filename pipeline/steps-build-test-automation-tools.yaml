steps:

  - checkout: ncea-test-automation

  - task: UseDotNet@2
    inputs:
      version: '6.x'

  - task: DotNetCoreCLI@2
    displayName: Restore
    inputs:
      command: restore
      projects: '**/*.sln'
      feedsToUse: 'select'

  - task: DotNetCoreCLI@2
    displayName: 'dotnet build'
    inputs:
      command: 'build'
      configuration: $(buildConfiguration)
      projects: '**/*.sln'

  - task: PublishPipelineArtifact@1
    condition: and(succeeded(), or(eq(variables['isMain'], 'true'), eq(variables['isPullRequest'], 'true')))
    inputs:
      targetPath: $(Build.SourcesDirectory)/src/bin/$(buildConfiguration)/net6.0
      artifactName: tests