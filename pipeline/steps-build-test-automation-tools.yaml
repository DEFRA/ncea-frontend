steps:

  - checkout: ncea-test-automation

  - task: NuGetToolInstaller@1
    displayName: Install NuGet

  - task: NuGetCommand@2
    displayName: NuGet restore
    inputs:
      restoreSolution: $(solution)

  - task: VSBuild@1
    displayName: Build solution
    inputs:
      solution: $(solution)
      platform: $(buildPlatform)
      configuration: $(buildConfiguration)

  - task: PublishPipelineArtifact@1
    condition: and(succeeded(), or(eq(variables['isMain'], 'true'), eq(variables['isPullRequest'], 'true')))
    inputs:
      targetPath: $(Build.SourcesDirectory)/src/bin/$(buildConfiguration)/net481
      artifactName: tests