{% extends "layout/template.njk" %}

{% from "partials/quick_search/macro.njk" import quickSearch %}
{% from "govuk/components/breadcrumbs/macro.njk" import govukBreadcrumbs %}

{% block beforeContent %}
  {{ super() }}
  {{ govukBreadcrumbs({
    items: [
      {
        text: "Home",
        href: homePageUrl,
        attributes: {
          onclick: "resetStorageData()"
        }
      },
      {
        text: "Search results",
        href: "#"
      }
    ]
  }) }}
{% endblock %}
{% block content %}

  {{ quickSearch({
    isResultPage: true,
    searchTerm: searchTerm,
    quickSearchPath: quickSearchPath,
    quickSearchOptions: quickSearchOptions
  }) }}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-one-third">
      <p>&nbsp;</p>
    </div>
    <div class="govuk-grid-column-two-thirds" id="results-block">
      Loading...Please wait.
    </div>
  </div>

{% endblock %}

{% block bodyEnd %}
  {{ super() }}
  <script src="{{ assetPath }}/scripts/browserStorage.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      readStorageData({formId: "{{quickSearchOptions.formId}}"});
      getSearchResults('{{resultItemsPath}}');
    });
  </script>
{% endblock %}