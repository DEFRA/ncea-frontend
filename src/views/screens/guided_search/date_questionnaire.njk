{% extends "layout/template.njk" %}

{% from "govuk/components/breadcrumbs/macro.njk" import govukBreadcrumbs %}
{% from "govuk/components/date-input/macro.njk" import govukDateInput %}
{% from "govuk/components/button/macro.njk" import govukButton %}

{% block beforeContent %}
  {{ super() }}
  {{ govukBreadcrumbs({
    items: [
      {
        text: "Home",
        href: homePageUrl,
        attributes: {
          onclick: "resetStorageData()"
        }
      },
      {
        text: "Questionnaire search",
        href: "#"
      }
    ]
  }) }}
{% endblock %}

{% block content %}
  <div class="govuk-grid-row">
    <form method="POST" action="{{guidedDateSearchPath}}" id="date-form">
      <div class="govuk-grid-column-two-thirds">
        <h1 class="govuk-heading-m">
          When was the data or information collected?
        </h1>
        <h2 class="govuk-heading-m">
          From
        </h2>
        {{ govukDateInput(fromDate) }}
        <h2 class="govuk-heading-m">
          To
        </h2>
        {{ govukDateInput(toDate) }}
        {{ govukButton({
            text: "Show results",
            attributes: {
              onclick: "storeFieldsData({ formId: 'date-form' })"
            }
        }) }}
      </div>
    </form>
  </div>
{% endblock %}

{% block bodyEnd %}
  {{ super() }}
  <script src="{{ assetPath }}/scripts/browserStorage.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      readStorageData({formId: 'date-form'});
    });
  </script>
{% endblock %}